<?xml version="1.0" encoding="utf-8"?>

<odoo>

<record id="view_employee_requisition_tree" model="ir.ui.view">
    <field name="name">employee.requisition.form</field>
    <field name="model">employee.requisition</field>
    <field name="arch" type="xml">
        <tree>
            <field name="name"/>
            <field name="requisition_date"/>
       </tree>
    </field>
</record>

 <record id="view_employee_requisition_form" model="ir.ui.view">
    <field name="name">employee.requisition.form</field>
    <field name="model">employee.requisition</field>
    <field name="arch" type="xml">
        <form>
            <header>
                <button name="button_confirm" type="object" states="draft" string="Confirm" groups="employee_want.group_requisition_employee" class="btn btn-primary"/>
                    <button name="button_approve" type="object" states="confirm" string="Approve" groups="employee_want.group_requisition_hr" class="btn btn-primary"/>
                    <button name="button_ready" type="object" states="approve" string="Ready" groups="employee_want.group_requisition_hr" class="btn btn-primary"/>
                    <button name="button_receive" type="object" states="ready" string="Receive" groups="employee_want.group_requisition_employee" class="btn btn-primary"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,approve,ready,receive"/> 
            </header>
            <sheet>
                   <group>
                        <group>
                            <!-- <field name="name"/>
                            <field name="requisition_date"/> -->
                            <field name="name" attrs="{'readonly': [('state', 'in', ('confirm', 'approve', 'ready', 'receive'))]}" required="True"/>
                            <field name="requisition_date" attrs="{'readonly': [('state', 'in', ('confirm', 'approve', 'ready', 'receive'))]}" required="True"/>
                        </group>
                   </group>
                      
                    <notebook>
                        <page string= "Product">
                            <group>
                                <field name="appoinment_line">
                                    <tree editable="bottom">
                                        <!-- <field name="product_name"/>
                                        <field name="product_qty"/> 
                                        <field name="appoinment_id" invisible="1"/>  -->
                                        <field name="product_name" attrs="{'readonly': [('parent.state', 'in', ('confirm', 'approve', 'ready', 'receive'))]}" required="True"/>
                                        <field name="product_qty" attrs="{'readonly': [('parent.state', 'in', ('confirm', 'approve', 'ready', 'receive'))]}" required="True"/>
                                        <field name="appoinment_id" attrs="{'readonly': [('parent.state', 'in', ('confirm', 'approve', 'ready', 'receive'))]}" invisible='1'/>
                                    </tree>
                                </field>
                            </group>
                        </page>
                    </notebook>
             </sheet>
        </form>
    </field>
</record>

<record id="action_employee_requisition_addon" model="ir.actions.act_window">
        <field name="name">Employee Requisition</field>
        <field name="res_model">employee.requisition</field>
        <field name="view_mode">tree,form</field>
</record>


<menuitem 
    id="hospital_doctor_menu" 
    name="Employee Requisition"
    action="action_employee_requisition_addon"
    sequence="2"/>


</odoo>